{"version":3,"sources":["website_helpers/common_components.cljs"],"mappings":"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","names":["website-helpers.common-components/sync-url-params!","vars","url","js/URL","js/window","seq__57708","cljs.core/seq","chunk__57709","count__57710","i__57711","vec__57722","cljs.core.nth","temp__5825__auto__","cljs.core/chunked-seq?","c__5568__auto__","cljs.core/chunk-first","cljs.core/chunk-rest","cljs.core/count","vec__57726","cljs.core/first","cljs.core/next","var","value","website-helpers.common-components/dropdown-check-list","title","on-change","opened","reagent.core.atom","cljs.core/deref","cljs.core/reset!","cljs.core/not","cljs.core.into","iter__5523__auto__","s__57732","cljs.core/LazySeq","c__5521__auto__","size__5522__auto__","b__57734","cljs.core/chunk-buffer","i__57733","cljs.core/-nth","cljs.core/chunk-append","cljs.core/chunk-cons","cljs.core/chunk","iter__57731","cljs.core/cons","cljs.core/rest","cljs.core.sort","cljs.core/keys","cljs.core.get","_","cljs.core.swap_BANG_","cljs.core/assoc"],"sourcesContent":["(ns website-helpers.common-components\n  (:require\n    [website-helpers.schemas :refer [ReagentComponent]]\n    [website-helpers.global :as global]\n    [reagent.core :as r]))\n\n(defn sync-url-params!\n  {:malli/schema [:=> [:cat [:map-of :string :boolean]] :nil]}\n  [vars]\n  (let [url (js/URL. (. js/window -location))]\n    (doseq [[var value] vars]\n      (if value\n        (.. url -searchParams (set var value))\n        (.. url -searchParams (delete var)))\n      (.. js/window -history (pushState nil \"\" (.toString url))))))\n\n(defn dropdown-check-list\n  {:malli/schema [:=>\n                  [:cat\n                   :any ; Actually an atom containing [:map-of :string\n                        ; :boolean]\n                   :string\n                   [:=> [:cat] :nil]]\n                  ReagentComponent]}\n  [vars title on-change]\n  (let [opened (r/atom false)]\n    (fn [] [:div {:id       \"tag-list\"\n                  :class    [\"dropdown-check-list\" (if @opened \"visible\" nil)]\n                  :style    {:overflow \"auto\" :max-height \"200px\"}\n                  :tabIndex \"100\"}\n            [:span {:class \"anchor\" :on-click #(reset! opened (not @opened))}\n             title]\n            (into [:ul {:class \"items\"}]\n                  (for [var (sort (keys @vars))]\n                    [:li {:key var}\n                     [:input {:type \"checkbox\"\n                              :checked (if (get @vars var) \"checked\" \"\")\n                              :on-change\n                              (fn [_]\n                                (swap! vars assoc var (not (get @vars var)))\n                                (sync-url-params! @vars)\n                                (on-change))}]\n                     var]))])))\n"]}